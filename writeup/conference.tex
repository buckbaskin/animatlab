\documentclass[letterpaper, 10 pt, conference]{IEEEconf} %
\author{William Baskin, Nicholas Szczecinski and Roger Quinn}
\title{
  {A Biologically Inspired Controller for Efficient Trajectory Execution with Pneumatic Actuated Joints}\\
}
% \date{Day Month Year}
% \date{\today}

% \usepackage[utf8]{inputenc}
% \usepackage[english]{babel}
% \usepackage{csquotes}
% \usepackage{graphicx}
% \graphicspath{ {images/} }
% \includegraphics[height=6.75in,angle=270]{HW25}

\usepackage[style=ieee, backend=biber]{biblatex}
\addbibresource{references.bib}

\usepackage[hidelinks]{hyperref}
\usepackage{cleveref}

% https://tex.stackexchange.com/questions/119513/cleveref-and-appendix-packages-appendix-referenced-as-section
% \crefname{appsec}{Appendix}{Appendices}

\newcommand{\myref}[1]{\hyperref[#1]{\Cref{#1}}}

%%% math %%%
\usepackage{amsmath, amssymb, amsthm}
% \DeclareMathOperator*{\argmax}{arg\,max}
% \DeclareMathOperator*{\argmin}{arg\,min}

% %%% Code %%%
% \usepackage{color}
% \usepackage{verbatim}
% \usepackage{listings}
% \definecolor{dkgreen}{rgb}{0,0.6,0}
% \definecolor{gray}{rgb}{0.5,0.5,0.5}
% \definecolor{mauve}{rgb}{0.58,0,0.82}

% \lstset{frame=tb,
%   language=Matlab,
%   aboveskip=3mm,
%   belowskip=3mm,
%   showstringspaces=false,
%   columns=flexible,
%   basicstyle={\small\ttfamily},
%   numbers=none,
%   numberstyle=\tiny\color{gray},
%   keywordstyle=\color{blue},
%   commentstyle=\color{dkgreen},
%   stringstyle=\color{mauve},
%   breaklines=true,
%   breakatwhitespace=true,
%   tabsize=3
% }


%%% Packages for the future %%%
% \usepackage{parskip}
% \usepackage{textcomp}
% \usepackage{soul}

\newcommand{\subsubsubsection}{\paragraph}
\newcommand{\bbs}[1]{\section{#1}}
\newcommand{\bbss}[1]{\subsection{#1}}
\newcommand{\bbsss}[1]{\subsubsection{#1}}
\newcommand{\bbssss}[1]{\subsubsubsection{#1}}

\newcommand{\norm}[1]{\left\lVert#1\right\rVert}

\begin{document}
\maketitle

\begin{abstract}
\label{chap:abstract}
This research develops a new synthetic nervous system for control of joints using pneumatic actuators in order to create a more efficient and adaptable walking robot system. This design implements new features not previously seen in a control oriented nervous system. It develops 3 major design components not previously used for control of antagonistic pneumatic actuators. It uses an internal model of the actuators to estimate the state of the joint. It uses internal estimates of the dynamics of the joint to continually optimize the control output. Additionally, it updates its own internal system model with a memory-like loop to allow the controller to adapt to any joint and trajectory. The controller allows for the replacement of proportional or other control designs with a learning system that decreases wasted antagonistic muscle activation and wasted energy, decreases phase lag and increases trajectory tracking accuracy.
\end{abstract}

\bbs{Introduction} % and Lit Review
\label{chap:introduction}

Walking robots offer many advantages over wheeled robots or other types
of locomotion. Wheeled or tracked vehicles are unable to access over half
of the earth's landmass. \cite{BigDog} Further, many areas in which humans
operate are designed for walking as opposed to rolling, so a successful walking 
robot has increased mobility in environments designed for human walking. On the
other hand, walking robots are harder to control than their wheeled 
counterparts.

Many robots have looked to biological inspiration to increase the mobility and
ease of control of robots. In particular, many biological systems have increased
redundancy to aid in balance with many animals, including dogs and cats, walking
on 4 or more legs. The inspiration taken varies from imitating gait timing to
help coordinate simple legs to completely mimicing musculoskeletal layout. The
Puppy robot was designed to mimic the operation of a large canine walking in
the sagittal plane. \cite{PuppyDesign}

Another advantage that animals have over most robots is their actuators.
Biological muscles are compliant and are a key part to how animals walk. Many
robots use electric motors or hydraulic actuators to actuate joints, which can
mean that other biologically inspired design decisions aren't necessarily 
optimal. Puppy chose to use pneumatic artificial muscles, which have a higher
power to weight ratio than other designs and offer similar compliance and
behavior to biological muscles. \cite{Tavakoli2008} Typically seen as a 
limitation, pneumatic muscles as actuators apply force during contraction, so 
they need to be used in antagonistic pairs. While this increases the complexity
of the robot, it also allows for further bio-inspiration in the robot design
and control system.

One of the major tradeoffs for pneumatic muscles is that they exhibit 
non-linear behavior in both static and dynamic control situations.
\cite{HuntPMuscles, DynamicPMuscles} This has 
motivated the designs of new types of controllers to overcome the non-linear
behavior through adaptation in the controller. In \cite{Jahanabadi2009}, the
authors propose a system called ``Active Force Control" where a neural network
is used to learn non-linear properties of the actuator and controlled mass.
The network is run in an inner control loop and the output of the network is
used to present the control situation in a linearized fashion to an outer PID
control system. The results suggest that a system model of the nonlinear 
properties of the actuators decreases positional error. The work was
applied to controlling a vertical trolley and used a neural network as a black
box for modelling the system, so there is an opportunity for improving the 
system and its application to controlling Puppy's rotational joints. 
In \cite{Wang2013}, a model-based controller was used to control the actuation
of a revolute joint with pneumatic muscles. The author's system allowed for
decreased antagonistic muscle overlap at high accelerations combined with a 
high stiffness, high overlap controller for precise position tracking in near
static situations. This adapting system was shown to be effective in their
results; however, it doesn't account for estimating changing properties of the
robot system that might reduce the effectiveness of the model.

A combination of these two types of controllers offers insight into how to build
an effective joint controller for Puppy. One further area of potential 
improvment over existing designs is the incorporation of biological inspiration
within the controller itself. In \cite{NickFunctionalSubnetwork}, the authors
demonstrate a method for using a dynamic, biologically accurate model of neurons
to develop models of neurons for controlling physical systems. The work in the 
paper describes how to create building blocks such as arithmetic operations,
differentiation or integration. These components can then be used together to 
recursively create new controller architectures that use biological inspiration
taken from literature for controlling legged robots and combine it with an
efficient system for engineering the correct control responses. Together,
existing literature suggests that a neuron-based controller that adapts to the
properties of the muscles and the joints that it controls offers a new
architecture for more efficient and more accurate control of pneumatic muscle-
actuated robots.

In this paper, we show the design process for a new adapting controller. The
design of the controller itself is discussed in \myref{chap:controller_design}.
The implementation of the controller within a synthetic nervous system is 
discussed in \myref{chap:neuron_design}. The results are shown in \myref{chap:results} and discussed in \myref{chap:discussion}.

\bbs{Methods}
\label{chap:methods}

\bbss{Controller Design}
\label{chap:controller_design}

The controller design has 3 major goals derived from
requirements and challenges faced with a neural implementation in
\cite{HuntPhDThesis}.

\begin{enumerate}
\item Decrease torque errors between neuron desired model and executed torques
\item Minimize phase shift between desired and achieved trajectory
\item Increase position accuracy to less than 5 degrees from maximum desired
position
\end{enumerate}

In order to achieve these 3 goals, 3 areas of improvement were identified:
sensor fusion, an optimizing internal loop and a better system model.

\bbsss{Sensor Fusion}

The goal of the sensor fusion system is to provide an accurate measure of the
current state of the joint for the rest of the controller. The joint is defined
by 5 related parameters: position, velocity, acceleration and the pressure in
each of the antagonistic actuators.

While more complex methods are possible, the first controller prototype used
a finite divided difference to estimate the velocity of the joint from the
measured position. The acceleration can be estimated one of two ways: a second
numerical derivative or by using knowledge of how the pressure in the actuators
applies force to the joint itself. The first method was easier to implement in
code. The second method derived a better result when implemented in neurons (see
\myref{chap:neuron_design}).

The internal estimation of the acceleration based on pressure comes from \cite{HuntPMuscles}.

To calculate a pressure from a force and position, the following model is used:

\begin{equation}
P = a_{0} + a_{1} * tan(a_{2} (\dfrac{k}{a_{4} * F + k_{max}} + a_{3})) + a_{5} * F + a_{6} * S
\end{equation}

\begin{equation}
k_{max} = \dfrac{L_{rest} - L_{620 kPa}}{L_{rest}}
\end{equation}

\begin{equation}
k = \dfrac{L_{rest} - L_{angle}}{L_{rest}}
\end{equation}

\begin{equation}
L_{angle} = L_{0} - L_{1} cos(\alpha + \theta)
\end{equation}

\begin{equation}
F = \dfrac{T}{d cos(\beta + \theta)}
\end{equation}

$\alpha, \beta, d, L_{rest}$ and $L_{620 kPa}$ represent the parameters for a 
particular actuator. The $a$ values represent optimized parameters
for the generalized model that adjusts to all actuators. See \cite{HuntPMuscles}
for more details. Once the torque is calculated, the 
estimation of acceleration comes from the internal estimation of the joint's mass, damping and conservative forces.

\bbsss{Optimizing Torque Control}

\bbsss{System Modeling and Improvement}

\bbss{Neuron Design}
\label{chap:neuron_design}



\bbs{Results}
\label{chap:results}

\bbs{Discussion}
\label{chap:discussion}

\bbs{Conclusion}
\label{chap:conclusion}

\newpage
\label{chap:references}
%TODO(buckbaskin): clean out extra unnecessary information from references.bib
\printbibliography[heading=bibintoc, title={Bibliography}]

\end{document}
