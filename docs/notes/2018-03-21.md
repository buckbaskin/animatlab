# March 19, 2017

## Linear Stability Analysis

## Torque is Linear w.r.t. Pressure

Approximately and not near 0 torque/pressure. The slope of the linear part of the curve changes with the angle (maximum at 0 when the actuator is perpendicular to the mounting axis). The ability to apply increasing torque with increasing pressure falls of as the joint gets close to 90 degrees from the 0 point because the mounting axis is close to parallel with the actuator.

Because of this I'm going to assume the joint is active in the +- 45 deg range.

To calculate the torque from a given pressure, find 2 points in the linear region. This is any torque where the pressure isn't clipped to 620 (P(T) < 620) and the pressure is above the nonlinear range (say P(T) > 100 to be safe). This is a very small range (<0.25 Nm) for large joint angles and a large range (0.5 Nm to 2.5 Nm) for 0 angle. This gives you the slope, which can be used to convert back and forth. This also avoids weird effects near 0 or with negative requested torque.

Additionally, this analysis shows that the actuators can be assumed to be linear w.r.t. pressure which means that the whole control system (assuming ideal pressure changes) can be linear in the inputs. A measured position can have a proportional gain to calculate desired torque, the desired torque linearly converts to pressure (within the 100-620 kPa range) and the pressures linearly apply torque.

### Complications

The model has three primary sets of complications. For one, the pressure controller as implemented is a bang-bang controller with a ~15 kPa hysterisis window, so pressure control will be close but not exact. This should be okay if the controller can be run stably where, for any calculated value, it will also run at the maximum of the window and the minimum. 

The other complication is the dynamics and damping of the actuator. This comes from two sources. In reading literature, there is some internal damping that comes from the material of the actuator flexing and disappating some energy. Additionally, there are losses due to airflow friction and the limitations of the size of tube when large pressure changes occur.

Third, there are conservative forces that act on the actuator. The weight of the actuator itself helps it act as a pendulum and will tend to move the actuator towards 0 angle if not actuated. The other larger force is the force of supporting the weight of the robot. On a single joint system, this leads to the link behaving as an inverted pendulum.

## Active Control is needed, but things are promising

Because of the weight on the robot, passively setting torques to a constant is unstable. However, with this effect minimized for now, the joint converges to the right angle (or joint limits in extreme cases) from pretty much anywhere within the controllable range. The speed of the convergence is proportional to the difference in pressure, which increases with increasing desired static angle.

This simulation indicates that the joint is stable for the operating range for any given pressure pair, assuming the muscles are strong enough to overcome static loads.